!function(){"use strict";var a=angular.module("learnApp",["ui.router","angular-storage","restangular","angular-cache","ngAnimate","learnApp.home","learnApp.login","learnApp.rte.categories","learnApp.rte.documentaries","learnApp.signup","learnApp.news"]);a.config(["API_URL","$stateProvider","$urlRouterProvider","$httpProvider","RestangularProvider","CacheFactoryProvider",function(a,b,c,d,e,f){c.otherwise("/home"),b.state("main",{url:"/",controller:"AppCtrl",templateUrl:"build/html/routes/home/home.html"}),angular.extend(f.defaults,{maxAge:9e5}),e.setBaseUrl(a),e.setDefaultHttpFields({cache:!0})}]),a.run(["$rootScope","$state","store",function(a,b,c){a.$on("$stateChangeStart",function(b,d){d.data&&d.data.requiresLogin&&(c.get("session")||(a.login=!1))}),a.$watch("username",function(b,d){console.log("new value:"+b),console.log("old value:"+d),d||(a.username=c.get("username"))})}]),a.filter("sanitize",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),a.constant("API_URL","http://api.picnicgrafico.com/api")}(),function(){"use strict";angular.module("learnApp").controller("AppCtrl",["$rootScope","$scope","store",function(a,b,c){var d=c.get("session");d&&(console.log("sess: "+d),a.login=!0,a.username=c.get("username")),b.logout=function(){a.login=!1,a.username=void 0,c.remove("username"),c.remove("session_token"),c.remove("session")}}])}(),function(){"use strict";angular.module("learnApp.rte.categories",["ui.router","angular-storage","learnApp.rte.categoryList","learnApp.rte.resourse","learnApp.svc.categories"]).config(["$stateProvider",function(a){a.state("categories",{url:"/categories",controller:"CatsCtrl",templateUrl:"build/html/routes/categories/categories.html"}).state("categories.cat",{url:"/:cat",controller:"CatListCtrl",templateUrl:"build/html/routes/categories/category-list/category-list.html"}).state("categories.resource",{url:"/:cat/:id",controller:"ResCtrl",templateUrl:"build/html/routes/categories/resourse/resourse.html"})}])}(),function(){"use strict";angular.module("learnApp.rte.categoryList",[])}(),function(){"use strict";angular.module("learnApp.rte.resourse",[])}(),function(){"use strict";angular.module("learnApp.rte.documental",[])}(),function(){"use strict";angular.module("learnApp.rte.documentaries",["ui.router","angular-storage","learnApp.rte.documental","learnApp.svc.documentaries"]).config(["$stateProvider",function(a){a.state("docs",{url:"/documentaries",controller:"DocsCtrl",templateUrl:"build/html/routes/documentaries/documentaries.html"}).state("docs.id",{url:"/:id",controller:"DocCtrl",templateUrl:"build/html/routes/documentaries/documental.html"})}])}(),function(){"use strict";angular.module("learnApp.events",["ui.router","angular-storage"]).config(["$stateProvider",function(a){a.state("evenst",{url:"/events",controller:"EventsCtrl",templateUrl:"build/html/routes/events/events.html"})}])}(),function(){"use strict";angular.module("learnApp.home",["ui.router","angular-storage","learnApp.svc.randomArticles"]).config(["$stateProvider",function(a){a.state("home",{url:"/home",controller:"HomeCtrl",templateUrl:"build/html/routes/home/home.html"})}])}(),function(){"use strict";angular.module("learnApp.login",["ui.router","angular-storage"]).config(["$stateProvider",function(a){a.state("login",{url:"/login",controller:"LoginCtrl",templateUrl:"build/html/routes/login/login.html"})}])}(),function(){"use strict";angular.module("learnApp.news",["ui.router","angular-storage"]).config(["$stateProvider",function(a){a.state("news",{url:"/news",controller:"NewsCtrl",templateUrl:"build/html/routes/news/news.html"})}])}(),function(){"use strict";angular.module("learnApp.signup",["ui.router","angular-storage"]).config(["$stateProvider",function(a){a.state("signup",{url:"/signup",controller:"SignUpCtrl",templateUrl:"build/html/routes/signup/signup.html"})}])}(),function(){"use strict";angular.module("learnApp.rte.categories").controller("CatsCtrl",["$scope","Categories",function(a,b){b.getList().then(function(b){a.categories=b,a.loadingIsDone=!0})}])}(),function(){"use strict";angular.module("learnApp.rte.categoryList").controller("CatListCtrl",["$scope","$stateParams","Categories",function(a,b,c){var d={};c.getList().then(function(b){a.loadingIsDone=!1,b.forEach(function(a){d[a.id]={},d[a.id].sectionTitle=a.title,d[a.id].description=a.description}),a.loadingIsDone=!0}),a.category=b.cat,c.one(a.category).getList().then(function(c){a.category=b.cat,a.categories=c,a.meta=d[a.category],a.loadingIsDone=!0})}])}(),function(){"use strict";angular.module("learnApp.rte.resourse").controller("ResCtrl",["$rootScope","$scope","$stateParams","Categories","$sce",function(a,b,c,d,e){var f=c.id,g=c.cat;d.one(g).one("topic").one(f).getList().then(function(c){var d=[];b.topics=c,b.topics.forEach(function(a,c){b.topics[c].content=e.trustAsHtml(a.content),d.push(a.time)}),b.times=d,b.meta=c[0].meta,a.$broadcast("event:data-received",{type:c.type,video:c.media})})}])}(),function(){"use strict";angular.module("learnApp.rte.resourse").controller("ResCtrl",["$rootScope","$scope","$stateParams","Categories","$sce",function(a,b,c,d,e){var f=c.id,g=c.cat;d.one(g).one("topic").one(f).getList().then(function(c){var d=[];b.topics=c,b.topics.forEach(function(a,c){b.topics[c].content=e.trustAsHtml(a.content),d.push(a.time)}),b.times=d,b.meta=c[0].meta,a.$broadcast("event:data-received",{type:c.type,video:c.media})})}])}(),function(){"use strict";angular.module("learnApp.rte.documental").controller("DocCtrl",["$rootScope","$scope","$stateParams","Documentaries",function(a,b,c,d){d.getList().then(function(d){var e=d[c.id-1];b.doc={id:e.id,title:e.title,data:e.content,videoId:e.media,type:e.type,time:e.time,credits:e.credits},a.$broadcast("event:data-received",{type:e.type,video:e.videoId})})}])}(),function(){"use strict";angular.module("learnApp.rte.documentaries").controller("DocsCtrl",["$scope","store","Documentaries",function(a,b,c){a.documentaries=[],c.getList().then(function(b){b.forEach(function(b){var c={id:b.id,thumbnail:b.thumbnail,title:b.title,subTitle:b.sub_title,brief:b.brief,time:b.time};a.documentaries.push(c),a.loadingIsDone=!0})})}])}(),function(){"use strict";angular.module("learnApp.events").controller("EventsCtrl",["$scope","$http","store","$state",function(a,b,c,d){a.arrNews=[{url:"documentaries",title:"Documentales",image:"documentaries/doc_port",id:"documentaries",date:""}]}])}(),function(){"use strict";angular.module("learnApp.home").controller("HomeCtrl",["$scope","RandomArticles",function(a,b){b.getList().then(function(b){a.articles=b})}])}(),function(){"use strict";angular.module("learnApp.login").controller("LoginCtrl",["$scope","$http","store","$state","Login",function(a,b,c,d,e){a.user={},a.login=function(){e.login(a.user).then(function(a){c.set("session","loginCredential"),c.set("session_token",a.data.session_token),c.set("username",a.data.username),d.go("home")},function(a){401===a&&alert("Error en secciÃ³n. Debes ingresar tu email y password correspondientes.")})}}])}(),function(){"use strict";angular.module("learnApp.news").controller("NewsCtrl",["$scope","$http","store","$state",function(a,b,c,d){a.arrNews=[{url:"documentaries",title:"Documentales",image:"documentaries/doc_port",id:"documentaries"}]}])}(),function(){"use strict";angular.module("learnApp.signup").controller("SignUpCtrl",["$scope","$http","store","$state","SignUp",function(a,b,c,d,e){a.user={},a.signup=function(){console.log(a.user),e.register(a.user).then(function(a){console.log("-- RESPONSE --"),console.log(a),console.log("user registered."),d.go("login")},function(a){console.log("-- FAIL --"),console.log(a),alert("Error en signup"),d.go(".")})}}])}(),function(){"use strict";angular.module("learnApp.svc.categories",[])}(),function(){"use strict";angular.module("learnApp.svc.documentaries",[])}(),function(){"use strict";angular.module("learnApp.svc.login",[])}(),function(){"use strict";angular.module("learnApp.svc.randomArticles",[])}(),function(){"use strict";angular.module("learnApp.svc.signup",[])}(),function(){"use strict";angular.module("learnApp.svc.youtube",[])}(),function(){"use strict";angular.module("learnApp.svc.categories").factory("Categories",["$state","Restangular","CacheFactory",function(a,b,c){var d,e,f;return f={maxAge:9e5,cacheFlushInterval:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage"},c.get("catsCache")||(d=c.createCache("catsCache",f)),e||(e=b.service("categories"),b.addFullRequestInterceptor(function(a,b,c,e,f,g,h){function i(a,b){var c,d=[];for(c=a;b>=c;c++)d.push(c);return d}var j;if(j=i(1,20),"categories"===c||j.indexOf(parseInt(c,10))>=0)switch(b){case"getList":h.cache=d}return{element:a,headers:f,params:g,httpConfig:h}})),e}])}(),function(){"use strict";angular.module("learnApp.svc.documentaries").factory("Documentaries",["$state","Restangular","CacheFactory",function(a,b,c){var d,e,f;return f={maxAge:9e5,cacheFlushInterval:9e5,deleteOnExpire:"aggressive",storageMode:"localStorage"},c.get("docsCache")||(d=c.createCache("docsCache",f)),e||(e=b.service("documentaries"),b.addFullRequestInterceptor(function(a,b,c,e,f,g,h){if(console.log("operation: "+b),console.log("what: "+c),"documentaries"===c)switch(b){case"getList":h.cache=d}return{element:a,headers:f,params:g,httpConfig:h}})),e}])}(),function(){"use strict";angular.module("learnApp.svc.login").factory("Login",["API_URL","$q","$http",function(a,b,c){var d;return d=function(d){var e,f,g;return e=a+"/user/session",console.log("-- REQUEST --"),f=b.defer(),c({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(g in a)b.push(encodeURIComponent(g)+"="+encodeURIComponent(a[g]));return b.join("&")},data:d}).success(function(a){f.resolve(a)}).error(function(a,b){f.reject(b),console.log(a,b)}),f.promise},{login:d}}])}(),function(){"use strict";angular.module("learnApp.svc.randomArticles").factory("RandomArticles",["Restangular",function(a){return a.service("latest")}])}(),function(){"use strict";angular.module("learnApp.svc.signup").factory("SignUp",["API_URL","$q","$http",function(a,b,c){var d;return d=function(d){var e,f;return e=a+"/user/create",console.log("-- REQUEST --"),f=b.defer(),c({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b,c=[];for(b in a)c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c.join("&")},data:d}).success(function(a){f.resolve(a)}).error(function(a,b){f.reject(a),console.log(a,b)}),f.promise},{register:d}}])}(),function(){"use strict";angular.module("learnApp.svc.youtube").factory("YouTubeLoader",["$q","$window",function(a,b){var c,d,e,f;return c=document.createElement("script"),c.src="http://www.youtube.com/player_api",d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(c,d),e=!1,f=a.defer(),b.onYouTubeIframeAPIReady=function(){e||(e=!0,f.resolve())},{whenLoaded:function(){return f.promise}}}])}(),function(){"use strict";angular.module("learnApp").directive("categoriesMeta",function(){return{restrict:"E",scope:{meta:"=",category:"="},templateUrl:"build/html/directives/categories-meta/categories-meta.html",link:function(a,b){console.log(a.doc)}}})}(),function(){"use strict";angular.module("learnApp").directive("categoryItem",function(){return{restrict:"E",scope:{data:"=",category:"=?",sectype:"@"},templateUrl:"build/html/directives/category-item/category-item.html",link:function(a,b){"cats"===a.sectype?a.section="categories":a.section="documentaries"}}})}(),function(){"use strict";angular.module("learnApp").directive("documental",["store",function(a){return{restrict:"E",scope:{doc:"="},templateUrl:"build/html/directives/documental/documental.html",link:function(a,b){console.log(a.doc)}}}])}(),function(){"use strict";angular.module("learnApp").directive("documentariesItem",function(){return{restrict:"E",scope:{doc:"="},templateUrl:"build/html/directives/documentaries-item/documentaries-item.html",link:function(a,b){console.log(a.doc)}}})}(),function(){"use strict";angular.module("learnApp").directive("youtube",["YouTubeLoader","$compile",function(a,b){return{restrict:"E",scope:{height:"@",width:"@",videoid:"@",type:"@"},template:"<div></div>",link:function(c,d){var e,f,g,h,i;g=document.createElement("script"),g.src="http://www.youtube.com/player_api",h=document.getElementsByTagName("script")[0],h.parentNode.insertBefore(g,h),c.$watch("videoid",function(g){console.log(g),console.log(c.type),"youtube"===c.type?a.whenLoaded().then(function(){i=new YT.Player(d.children()[0],{playerVars:{autoplay:0,html5:1,theme:"light",modesbranding:0,color:"white",iv_load_policy:3,showinfo:1,controls:1},height:c.height,width:c.width,videoId:g})}):(console.log("Creating player"),e=angular.element("<span/>"),f='<video class="resp-vid" width="640" height="390" controls><source src="build/assets/video/'+g+"/"+g+'.mp4" type="video/mp4">Your browser does not support the video tag.</video>',e.append(f),b(e)(c),d.append(e))})}}}])}();